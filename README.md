# QuantumAuth â€” Account Abstraction with TPMâ€‘Sealed Keys

![Contracts CI](https://github.com/quantumauth-io/quantum-auth-contracts/actions/workflows/contracts.yml/badge.svg)
![Tests CI](https://github.com/quantumauth-io/quantum-auth-contracts/actions/workflows/tests.yml/badge.svg)
![Coverage](https://codecov.io/gh/quantumauth-io/quantum-auth-contracts/branch/main/graph/badge.svg)
![Solidity](https://img.shields.io/badge/solidity-^0.8.24-blue)
![License](https://img.shields.io/badge/license-Apache%202.0-blue)

QuantumAuth is an **ERCâ€‘4337 Account Abstraction (AA) smartâ€‘contract system** designed to eliminate traditional privateâ€‘key exposure by combining:

* **Account Abstraction (ERCâ€‘4337)**
* **TPMâ€‘sealed cryptographic keys**
* **Policyâ€‘driven authorization & recovery**
* **Hardwareâ€‘bound security guarantees**

This repository contains the **onâ€‘chain contracts**, **deterministic build tooling**, and **Go bindings** used by the QuantumAuth wallet and client stack.

---

## ğŸ” Security Model

### Traditional Wallets

* Private keys stored in software
* Vulnerable to malware, memory scraping, phishing
* Single point of failure

### QuantumAuth

* Keys are **generated and sealed inside a TPM**
* Private key material **never leaves hardware**
* Smart contracts validate **TPMâ€‘backed signatures**
* Recovery and authorization enforced **onâ€‘chain**

> Even a fully compromised operating system cannot extract or reuse the private key.

---

## ğŸ§© Architecture

### Onâ€‘chain Contracts

* **QuantumAuthAccount.sol**
  ERCâ€‘4337 compatible Account Abstraction wallet implementing:

    * TPMâ€‘verified signatures
    * Multiâ€‘mode authorization
    * Recovery logic

* **TPMVerifierSecp256k1.sol**
  Verifies secp256k1 signatures produced by TPMâ€‘sealed keys.

* **EntryPoint.sol**
  Standard ERCâ€‘4337 EntryPoint (pinned, deterministic build).

* **QAERC20.sol**
  Minimal ERCâ€‘20 used for testing, tooling, and bindings generation.

### Offâ€‘chain

* Deterministic Solidity compilation via Dockerized `solc`
* Go bindings generated via `abigen`
* Client handles TPM interaction, policy evaluation, and UserOperation construction

---

## ğŸ“¦ Repository Structure

```
contracts/
  account/QuantumAuthAccount.sol
  TPMVerifierSecp256k1.sol
  QAERC20.sol

abi/
bin/
bindings/go/

scripts/
  gen-solc.sh
  gen-abigen.sh
```

---

## âš™ï¸ Solidity Version

* **Solidity:** `^0.8.24`
* Compiled using a **pinned Docker solc image** for reproducibility

---

## ğŸ›  Build & Code Generation

### Generate ABI / BIN

```bash
pnpm run gen:solc
```

### Generate Go bindings

```bash
pnpm run gen:abigen
```

### Full generation pipeline

```bash
pnpm run gen
```

> CI enforces that generated artifacts are always committed and upâ€‘toâ€‘date.

---

## ğŸ§ª Testing

Tests are executed using **Hardhat**:

```bash
pnpm test
```

Tests cover:

* ERCâ€‘4337 validation flows
* Signature verification
* Account recovery modes
* ERCâ€‘20 interactions

---

## ğŸ“Š Coverage

Coverage reporting will be added using `solidity-coverage`.

Planned command:

```bash
pnpm run coverage
```

Badge will update automatically once enabled in CI.

---

## ğŸ”„ Deterministic Builds

* Solidity compiled via pinned `solc` version
* ERCâ€‘4337 EntryPoint pinned to a specific release
* Generated bytecode and bindings checked in
* CI guarantees reproducible outputs

---

## ğŸš¦ CI Pipelines

* **contracts** â€” Solidity compilation & binding generation
* **tests** â€” Hardhat test suite

Both pipelines must pass for changes to be accepted.

---

## ğŸ“œ License

Licensed under the **Apache License, Version 2.0**.

See [`LICENSE`](LICENSE) for details.

---

## ğŸ§­ Status

QuantumAuth is under **active development**.
The core architecture is stable; authorization policies and tooling continue to evolve.

---

## ğŸ¤ Contributions

Security reviews, audits, and protocolâ€‘level feedback are welcome.

If you are an Ethereum developer interested in **hardwareâ€‘backed Account Abstraction**, your input is especially valuable.
